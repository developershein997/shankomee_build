<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>SKM Web Delight | GoldenMM</title>
    <link rel="shortcut icon" href="TemplateData/favicon.ico">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: '#3B82F6',
              secondary: '#10B981',
              accent: '#F59E0B',
              dark: '#1F2937',
              light: '#F9FAFB'
            },
            animation: {
              'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
              'bounce-slow': 'bounce 2s infinite',
              'fade-in': 'fadeIn 0.5s ease-in-out',
              'slide-up': 'slideUp 0.5s ease-out'
            },
            keyframes: {
              fadeIn: {
                '0%': { opacity: '0' },
                '100%': { opacity: '1' }
              },
              slideUp: {
                '0%': { transform: 'translateY(20px)', opacity: '0' },
                '100%': { transform: 'translateY(0)', opacity: '1' }
              }
            }
          }
        }
      }
    </script>
    <style>
      .gradient-bg {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }
      .glass-effect {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
      }
      .progress-bar {
        background: linear-gradient(90deg, #3B82F6, #10B981, #F59E0B);
        background-size: 200% 100%;
        animation: shimmer 2s ease-in-out infinite;
      }
      @keyframes shimmer {
        0% { background-position: 200% 0; }
        100% { background-position: -200% 0; }
      }
    </style>
  </head>
  <body class="bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 min-h-screen text-white overflow-x-hidden">
    <!-- Audio Element for Background Music -->
    <audio id="bgMusic" loop>
      <source src="TemplateData/sounds/background.mp3" type="audio/mpeg">
      <source src="TemplateData/sounds/background.ogg" type="audio/ogg">
    </audio>

    <!-- Loading Screen -->
    <div id="loading-screen" class="fixed inset-0 z-50 flex flex-col items-center justify-center gradient-bg">
      <!-- Logo Section -->
      <div class="text-center mb-8 animate-fade-in">
        <img src="TemplateData/shan.jpg" alt="SKM Web Delight Logo" 
             class="w-24 h-24 md:w-32 md:h-32 rounded-full mx-auto mb-4 shadow-2xl border-4 border-white/20">
        <h1 class="text-3xl md:text-5xl font-bold text-white mb-2 drop-shadow-lg">
          SKM Web Delight
        </h1>
        <p class="text-lg md:text-xl text-blue-100 opacity-90">GoldenMM Experience</p>
      </div>

      <!-- Progress Bar Container -->
      <div class="w-80 md:w-96 max-w-full px-4 animate-slide-up">
        <div class="bg-white/20 rounded-full h-3 mb-4 overflow-hidden">
          <div id="progress-bar" class="progress-bar h-full rounded-full transition-all duration-300 ease-out" 
               style="width: 0%"></div>
        </div>
        <div class="text-center">
          <p id="loading-text" class="text-lg font-medium text-white mb-2">Initializing...</p>
          <p id="progress-percentage" class="text-sm text-blue-200">0%</p>
        </div>
      </div>

      <!-- Loading Animation -->
      <div class="mt-8 flex space-x-2">
        <div class="w-3 h-3 bg-white rounded-full animate-bounce-slow"></div>
        <div class="w-3 h-3 bg-white rounded-full animate-bounce-slow" style="animation-delay: 0.1s"></div>
        <div class="w-3 h-3 bg-white rounded-full animate-bounce-slow" style="animation-delay: 0.2s"></div>
      </div>
    </div>

    <!-- Main Game Container -->
    <div id="game-container" class="hidden min-h-screen">
      <!-- Header -->
      <header class="glass-effect p-4 md:p-6">
        <div class="flex items-center justify-between max-w-7xl mx-auto">
          <div class="flex items-center space-x-3">
            <img src="TemplateData/shan.jpg" alt="Logo" class="w-10 h-10 rounded-full">
            <h2 class="text-xl md:text-2xl font-bold">SKM Web Delight</h2>
          </div>
          <div class="flex items-center space-x-4">
            <button id="sound-toggle" class="p-2 rounded-full bg-white/20 hover:bg-white/30 transition-colors">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.793L4.5 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.5l4.883-3.793a1 1 0 011.617.793zM12.293 7.293a1 1 0 011.414 0L15 8.586l1.293-1.293a1 1 0 111.414 1.414L16.414 10l1.293 1.293a1 1 0 01-1.414 1.414L15 11.414l-1.293 1.293a1 1 0 01-1.414-1.414L13.586 10l-1.293-1.293a1 1 0 010-1.414z" clip-rule="evenodd"></path>
              </svg>
            </button>
            <button id="fullscreen-btn" class="px-4 py-2 bg-primary hover:bg-blue-600 rounded-lg transition-colors">
              Fullscreen
            </button>
          </div>
        </div>
      </header>

      <!-- Unity Container -->
      <div id="unity-container" class="unity-desktop flex-1 flex items-center justify-center p-4">
        <canvas id="unity-canvas" width="960" height="600" tabindex="-1" 
                class="max-w-full h-auto rounded-lg shadow-2xl"></canvas>
      </div>

      <!-- Footer -->
      <footer class="glass-effect p-4 text-center">
        <p class="text-sm text-blue-200">Â© 2024 SKM Web Delight - GoldenMM Experience</p>
      </footer>
    </div>

    <!-- Mobile Orientation Message -->
    <div id="rotate-message" class="hidden fixed inset-0 z-50 flex items-center justify-center gradient-bg">
      <div class="text-center p-8">
        <div class="w-16 h-16 mx-auto mb-4 animate-pulse-slow">
          <svg class="w-full h-full text-white" fill="currentColor" viewBox="0 0 24 24">
            <path d="M16.48 2.52c3.27 1.55 5.61 4.72 5.97 8.48h1.5C23.44 4.84 18.29 0 12 0l-.66.03 3.81 3.81 1.33-1.32zm-6.25-.77c-.59-.59-1.54-.59-2.12 0L1.75 8.11c-.59.59-.59 1.54 0 2.12l12.02 12.02c.59.59 1.54.59 2.12 0l6.36-6.36c.59-.59.59-1.54 0-2.12L10.23 1.75zm4.6 19.44L2.81 9.17l6.36-6.36 12.02 12.02-6.36 6.36z"/>
          </svg>
        </div>
        <h3 class="text-2xl font-bold mb-2">Please Rotate Your Device</h3>
        <p class="text-lg text-blue-100">For the best experience, please rotate to landscape mode</p>
      </div>
    </div>

    <script>
      // Global variables
      let unityInstance = null;
      let isSoundEnabled = true;
      let loadingProgress = 0;
      let loadingSteps = [
        { text: 'Initializing...', progress: 10 },
        { text: 'Loading assets...', progress: 25 },
        { text: 'Preparing Unity...', progress: 40 },
        { text: 'Loading framework...', progress: 60 },
        { text: 'Starting game...', progress: 80 },
        { text: 'Almost ready...', progress: 95 },
        { text: 'Launching!', progress: 100 }
      ];

      // DOM elements
      const loadingScreen = document.getElementById('loading-screen');
      const gameContainer = document.getElementById('game-container');
      const progressBar = document.getElementById('progress-bar');
      const loadingText = document.getElementById('loading-text');
      const progressPercentage = document.getElementById('progress-percentage');
      const rotateMessage = document.getElementById('rotate-message');
      const soundToggle = document.getElementById('sound-toggle');
      const fullscreenBtn = document.getElementById('fullscreen-btn');
      const bgMusic = document.getElementById('bgMusic');

      // Initialize the app
      function init() {
        checkOrientation();
        startLoadingSequence();
        setupEventListeners();
      }

      // Check device orientation
      function checkOrientation() {
        if (window.innerHeight > window.innerWidth) {
          rotateMessage.classList.remove('hidden');
        } else {
          rotateMessage.classList.add('hidden');
        }
      }

      // Loading sequence with progress updates
      function startLoadingSequence() {
        let currentStep = 0;
        
        const updateProgress = () => {
          if (currentStep < loadingSteps.length) {
            const step = loadingSteps[currentStep];
            loadingText.textContent = step.text;
            progressBar.style.width = step.progress + '%';
            progressPercentage.textContent = step.progress + '%';
            currentStep++;
            
            setTimeout(updateProgress, 800);
          } else {
            setTimeout(() => {
              loadingScreen.classList.add('hidden');
              gameContainer.classList.remove('hidden');
              startUnity();
            }, 500);
          }
        };
        
        updateProgress();
      }

      // Start Unity WebGL
      function startUnity() {
        const buildUrl = "Build";
        const loaderUrl = buildUrl + "/SKMWebDelight.loader.js";
        
        const config = {
          dataUrl: buildUrl + "/SKMWebDelight.data",
          frameworkUrl: buildUrl + "/SKMWebDelight.framework.js",
          codeUrl: buildUrl + "/SKMWebDelight.wasm",
          streamingAssetsUrl: "StreamingAssets",
          companyName: "Delight",
          productName: "GoldenMM",
          productVersion: "1.0.3",
          showBanner: unityShowBanner,
        };

        // Mobile detection and setup
        const container = document.querySelector("#unity-container");
        const canvas = document.querySelector("#unity-canvas");
        
        if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
          container.className = "unity-mobile";
          canvas.className = "unity-mobile";
        } else {
          canvas.style.width = "960px";
          canvas.style.height = "600px";
        }

        // Load Unity
        const script = document.createElement("script");
        script.src = loaderUrl;
        script.onload = () => {
          createUnityInstance(canvas, config, (progress) => {
            // Unity loading progress
          }).then((instance) => {
            unityInstance = instance;
            // Auto-start background music
            if (isSoundEnabled) {
              bgMusic.play().catch(e => console.log('Audio autoplay blocked'));
            }
          }).catch((message) => {
            console.error('Unity failed to load:', message);
            alert('Failed to load the game. Please refresh the page.');
          });
        };
        
        document.body.appendChild(script);
      }

      // Unity banner system
      function unityShowBanner(msg, type) {
        // You can implement a custom notification system here
        console.log(`${type}: ${msg}`);
      }

      // Event listeners
      function setupEventListeners() {
        window.addEventListener('resize', checkOrientation);
        window.addEventListener('orientationchange', checkOrientation);
        
        soundToggle.addEventListener('click', toggleSound);
        fullscreenBtn.addEventListener('click', toggleFullscreen);
        
        // Prevent context menu on long press
        document.addEventListener('contextmenu', e => e.preventDefault());
      }

      // Toggle sound
      function toggleSound() {
        isSoundEnabled = !isSoundEnabled;
        if (isSoundEnabled) {
          bgMusic.play();
          soundToggle.innerHTML = `
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.793L4.5 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.5l4.883-3.793a1 1 0 011.617.793zM12.293 7.293a1 1 0 011.414 0L15 8.586l1.293-1.293a1 1 0 111.414 1.414L16.414 10l1.293 1.293a1 1 0 01-1.414 1.414L15 11.414l-1.293 1.293a1 1 0 01-1.414-1.414L13.586 10l-1.293-1.293a1 1 0 010-1.414z" clip-rule="evenodd"></path>
            </svg>
          `;
        } else {
          bgMusic.pause();
          soundToggle.innerHTML = `
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.793L4.5 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.5l4.883-3.793a1 1 0 011.617.793zM12.293 7.293a1 1 0 011.414 0L15 8.586l1.293-1.293a1 1 0 111.414 1.414L16.414 10l1.293 1.293a1 1 0 01-1.414 1.414L15 11.414l-1.293 1.293a1 1 0 01-1.414-1.414L13.586 10l-1.293-1.293a1 1 0 010-1.414z" clip-rule="evenodd"></path>
            </svg>
          `;
        }
      }

      // Toggle fullscreen
      function toggleFullscreen() {
        if (!document.fullscreenElement) {
          document.documentElement.requestFullscreen();
        } else {
          document.exitFullscreen();
        }
      }

      // Initialize when DOM is loaded
      document.addEventListener('DOMContentLoaded', init);
    </script>
  </body>
</html>
