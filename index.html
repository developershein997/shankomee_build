<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>SKM Web Delight | GoldenMM</title>
    <link rel="shortcut icon" href="TemplateData/favicon.ico">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: '#3B82F6',
              secondary: '#10B981',
              accent: '#F59E0B',
              dark: '#1F2937',
              light: '#F9FAFB'
            },
            animation: {
              'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
              'bounce-slow': 'bounce 2s infinite',
              'fade-in': 'fadeIn 0.5s ease-in-out',
              'slide-up': 'slideUp 0.5s ease-out'
            },
            keyframes: {
              fadeIn: {
                '0%': { opacity: '0' },
                '100%': { opacity: '1' }
              },
              slideUp: {
                '0%': { transform: 'translateY(20px)', opacity: '0' },
                '100%': { transform: 'translateY(0)', opacity: '1' }
              }
            }
          }
        }
      }
    </script>
    <style>
      .gradient-bg {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }
      .glass-effect {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
      }
      .progress-bar {
        background: linear-gradient(90deg, #3B82F6, #10B981, #F59E0B);
        background-size: 200% 100%;
        animation: shimmer 2s ease-in-out infinite;
      }
      @keyframes shimmer {
        0% { background-position: 200% 0; }
        100% { background-position: -200% 0; }
      }
      
      /* Preserve original Unity styles */
      #unity-container {
        background: transparent;
      }
      #unity-loading-bar {
        background: transparent;
      }
      #unity-progress-bar-empty {
        background: rgba(255, 255, 255, 0.2);
        border-radius: 8px;
        overflow: hidden;
      }
      #unity-progress-bar-full {
        background: linear-gradient(90deg, #3B82F6, #10B981, #F59E0B);
        height: 100%;
        transition: width 0.3s ease;
      }
      #unity-logo {
        background-image: url('TemplateData/shan.jpg');
        background-size: cover;
        background-position: center;
        border-radius: 50%;
        border: 4px solid rgba(255, 255, 255, 0.2);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      }
      #unity-footer {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border-radius: 12px;
        border: 1px solid rgba(255, 255, 255, 0.2);
      }
      #unity-fullscreen-button {
        background: linear-gradient(135deg, #3B82F6, #1D4ED8);
        border-radius: 8px;
        transition: all 0.3s ease;
      }
      #unity-fullscreen-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
      }
      #unity-build-title {
        color: #F59E0B;
        font-weight: bold;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
      }
    </style>
  </head>
  <body class="bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 min-h-screen text-white overflow-x-hidden">
    <!-- Audio Element for Background Music -->
    <audio id="bgMusic" loop>
      <source src="TemplateData/sounds/background.mp3" type="audio/mpeg">
      <source src="TemplateData/sounds/background.ogg" type="audio/ogg">
    </audio>

    <!-- Enhanced Rotate Message -->
    <div id="rotate-message" class="hidden fixed inset-0 z-50 flex items-center justify-center gradient-bg">
      <div class="text-center p-8">
        <div class="w-16 h-16 mx-auto mb-4 animate-pulse-slow">
          <svg class="w-full h-full text-white" fill="currentColor" viewBox="0 0 24 24">
            <path d="M16.48 2.52c3.27 1.55 5.61 4.72 5.97 8.48h1.5C23.44 4.84 18.29 0 12 0l-.66.03 3.81 3.81 1.33-1.32zm-6.25-.77c-.59-.59-1.54-.59-2.12 0L1.75 8.11c-.59.59-.59 1.54 0 2.12l12.02 12.02c.59.59 1.54.59 2.12 0l6.36-6.36c.59-.59.59-1.54 0-2.12L10.23 1.75zm4.6 19.44L2.81 9.17l6.36-6.36 12.02 12.02-6.36 6.36z"/>
          </svg>
        </div>
        <h3 class="text-2xl font-bold mb-2">Please Rotate Your Device</h3>
        <p class="text-lg text-blue-100">For the best experience, please rotate to landscape mode</p>
      </div>
    </div>

    <!-- Enhanced Unity Container -->
    <div id="unity-container" class="unity-desktop flex flex-col items-center justify-center min-h-screen p-4">
      <!-- Enhanced Header with Logo -->
      <div class="text-center mb-8 animate-fade-in">
        <img src="TemplateData/shan.jpg" alt="SKM Web Delight Logo" 
             class="w-20 h-20 md:w-24 md:h-24 rounded-full mx-auto mb-4 shadow-2xl border-4 border-white/20">
        <h1 class="text-2xl md:text-4xl font-bold text-white mb-2 drop-shadow-lg">
          SKM Web Delight
        </h1>
        <p class="text-lg md:text-xl text-blue-100 opacity-90">GoldenMM Experience</p>
      </div>

      <!-- Unity Canvas -->
      <canvas id="unity-canvas" width="960" height="600" tabindex="-1" 
              class="max-w-full h-auto rounded-lg shadow-2xl border-4 border-white/20"></canvas>
      
      <!-- Enhanced Unity Loading Bar -->
      <div id="unity-loading-bar" class="w-full max-w-md mt-8 animate-slide-up">
        <div id="unity-logo" class="w-16 h-16 mx-auto mb-4"></div>
        <div id="unity-progress-bar-empty" class="h-3 rounded-full overflow-hidden">
          <div id="unity-progress-bar-full" class="h-full rounded-full" style="width: 0%"></div>
        </div>
        <div class="text-center mt-4">
          <p class="text-lg font-medium text-white mb-2">Loading GoldenMM...</p>
          <div class="flex space-x-2 justify-center">
            <div class="w-2 h-2 bg-white rounded-full animate-bounce-slow"></div>
            <div class="w-2 h-2 bg-white rounded-full animate-bounce-slow" style="animation-delay: 0.1s"></div>
            <div class="w-2 h-2 bg-white rounded-full animate-bounce-slow" style="animation-delay: 0.2s"></div>
          </div>
        </div>
      </div>
      
      <!-- Enhanced Unity Warning -->
      <div id="unity-warning" class="mt-4"></div>
      
      <!-- Enhanced Unity Footer -->
      <div id="unity-footer" class="flex items-center justify-between w-full max-w-2xl mt-8 p-4">
        <div id="unity-webgl-logo" class="text-blue-200 text-sm">WebGL Powered</div>
        <button id="unity-fullscreen-button" class="px-6 py-2 text-white font-medium">
          Fullscreen
        </button>
        <div id="unity-build-title" class="text-lg">GoldenMM</div>
      </div>
    </div>
    
    <script>
      // Global variables
      let unityInstance = null;
      let isSoundEnabled = true;

      function checkOrientation() {
        var message = document.getElementById("rotate-message");
        if (window.innerHeight > window.innerWidth) {
          message.classList.remove('hidden');
        } else {
          message.classList.add('hidden');
        }
      }

      window.addEventListener("resize", checkOrientation);
      window.addEventListener("orientationchange", checkOrientation);
      checkOrientation();

      var container = document.querySelector("#unity-container");
      var canvas = document.querySelector("#unity-canvas");
      var loadingBar = document.querySelector("#unity-loading-bar");
      var progressBarFull = document.querySelector("#unity-progress-bar-full");
      var fullscreenButton = document.querySelector("#unity-fullscreen-button");
      var warningBanner = document.querySelector("#unity-warning");
      var bgMusic = document.getElementById("bgMusic");

      function unityShowBanner(msg, type) {
        function updateBannerVisibility() {
          warningBanner.style.display = warningBanner.children.length ? 'block' : 'none';
        }
        var div = document.createElement('div');
        div.innerHTML = msg;
        div.className = `p-3 rounded-lg mb-2 text-center font-medium ${
          type === 'error' ? 'bg-red-500 text-white' : 'bg-yellow-400 text-black'
        }`;
        warningBanner.appendChild(div);
        
        if (type !== 'error') {
          setTimeout(function() {
            if (warningBanner.contains(div)) {
              warningBanner.removeChild(div);
              updateBannerVisibility();
            }
          }, 5000);
        }
        updateBannerVisibility();
      }

      var buildUrl = "Build";
      var loaderUrl = buildUrl + "/SKMWebDelight.loader.js";
      var config = {
        dataUrl: buildUrl + "/SKMWebDelight.data",
        frameworkUrl: buildUrl + "/SKMWebDelight.framework.js",
        codeUrl: buildUrl + "/SKMWebDelight.wasm",
        streamingAssetsUrl: "StreamingAssets",
        companyName: "Delight",
        productName: "GoldenMM",
        productVersion: "1.0.3",
        showBanner: unityShowBanner,
      };

      if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
        var meta = document.createElement('meta');
        meta.name = 'viewport';
        meta.content = 'width=device-width, height=device-height, initial-scale=1.0, user-scalable=no, shrink-to-fit=yes';
        document.getElementsByTagName('head')[0].appendChild(meta);
        container.className = "unity-mobile";
        canvas.className = "unity-mobile";
      } else {
        canvas.style.width = "960px";
        canvas.style.height = "600px";
      }

      loadingBar.style.display = "block";

      var script = document.createElement("script");
      script.src = loaderUrl;
      script.onload = () => {
        createUnityInstance(canvas, config, (progress) => {
          progressBarFull.style.width = 100 * progress + "%";
        }).then((instance) => {
          unityInstance = instance;
          loadingBar.style.display = "none";
          
          // Auto-start background music
          if (isSoundEnabled) {
            bgMusic.play().catch(e => console.log('Audio autoplay blocked'));
          }
          
          fullscreenButton.onclick = () => {
            unityInstance.SetFullscreen(1);
          };
        }).catch((message) => {
          console.error('Unity failed to load:', message);
          alert('Failed to load the game. Please refresh the page.');
        });
      };
      
      document.body.appendChild(script);

      // Prevent context menu on long press
      document.addEventListener('contextmenu', e => e.preventDefault());
    </script>
  </body>
</html>
